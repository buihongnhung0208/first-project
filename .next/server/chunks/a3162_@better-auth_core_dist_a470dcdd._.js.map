{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/env/index.mjs"],"sourcesContent":["const _envShim = /* @__PURE__ */ Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || //@ts-expect-error\nglobalThis.Deno?.env.toObject() || //@ts-expect-error\nglobalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n  get(_, prop) {\n    const env2 = _getEnv();\n    return env2[prop] ?? _envShim[prop];\n  },\n  has(_, prop) {\n    const env2 = _getEnv();\n    return prop in env2 || prop in _envShim;\n  },\n  set(_, prop, value) {\n    const env2 = _getEnv(true);\n    env2[prop] = value;\n    return true;\n  },\n  deleteProperty(_, prop) {\n    if (!prop) {\n      return false;\n    }\n    const env2 = _getEnv(true);\n    delete env2[prop];\n    return true;\n  },\n  ownKeys() {\n    const env2 = _getEnv(true);\n    return Object.keys(env2);\n  }\n});\nfunction toBoolean(val) {\n  return val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV || \"\";\nconst isProduction = nodeENV === \"production\";\nconst isDevelopment = nodeENV === \"dev\" || nodeENV === \"development\";\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\nfunction getEnvVar(key, fallback) {\n  if (typeof process !== \"undefined\" && process.env) {\n    return process.env[key] ?? fallback;\n  }\n  if (typeof Deno !== \"undefined\") {\n    return Deno.env.get(key) ?? fallback;\n  }\n  if (typeof Bun !== \"undefined\") {\n    return Bun.env[key] ?? fallback;\n  }\n  return fallback;\n}\nfunction getBooleanEnvVar(key, fallback = true) {\n  const value = getEnvVar(key);\n  if (!value) return fallback;\n  return value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\nconst ENV = Object.freeze({\n  get BETTER_AUTH_SECRET() {\n    return getEnvVar(\"BETTER_AUTH_SECRET\");\n  },\n  get AUTH_SECRET() {\n    return getEnvVar(\"AUTH_SECRET\");\n  },\n  get BETTER_AUTH_TELEMETRY() {\n    return getEnvVar(\"BETTER_AUTH_TELEMETRY\");\n  },\n  get BETTER_AUTH_TELEMETRY_ID() {\n    return getEnvVar(\"BETTER_AUTH_TELEMETRY_ID\");\n  },\n  get NODE_ENV() {\n    return getEnvVar(\"NODE_ENV\", \"development\");\n  },\n  get PACKAGE_VERSION() {\n    return getEnvVar(\"PACKAGE_VERSION\", \"0.0.0\");\n  },\n  get BETTER_AUTH_TELEMETRY_ENDPOINT() {\n    return getEnvVar(\n      \"BETTER_AUTH_TELEMETRY_ENDPOINT\",\n      \"https://telemetry.better-auth.com/v1/track\"\n    );\n  }\n});\n\nconst COLORS_2 = 1;\nconst COLORS_16 = 4;\nconst COLORS_256 = 8;\nconst COLORS_16m = 24;\nconst TERM_ENVS = {\n  eterm: COLORS_16,\n  cons25: COLORS_16,\n  console: COLORS_16,\n  cygwin: COLORS_16,\n  dtterm: COLORS_16,\n  gnome: COLORS_16,\n  hurd: COLORS_16,\n  jfbterm: COLORS_16,\n  konsole: COLORS_16,\n  kterm: COLORS_16,\n  mlterm: COLORS_16,\n  mosh: COLORS_16m,\n  putty: COLORS_16,\n  st: COLORS_16,\n  // http://lists.schmorp.de/pipermail/rxvt-unicode/2016q2/002261.html\n  \"rxvt-unicode-24bit\": COLORS_16m,\n  // https://bugs.launchpad.net/terminator/+bug/1030562\n  terminator: COLORS_16m,\n  \"xterm-kitty\": COLORS_16m\n};\nconst CI_ENVS_MAP = new Map(\n  Object.entries({\n    APPVEYOR: COLORS_256,\n    BUILDKITE: COLORS_256,\n    CIRCLECI: COLORS_16m,\n    DRONE: COLORS_256,\n    GITEA_ACTIONS: COLORS_16m,\n    GITHUB_ACTIONS: COLORS_16m,\n    GITLAB_CI: COLORS_256,\n    TRAVIS: COLORS_256\n  })\n);\nconst TERM_ENVS_REG_EXP = [\n  /ansi/,\n  /color/,\n  /linux/,\n  /direct/,\n  /^con[0-9]*x[0-9]/,\n  /^rxvt/,\n  /^screen/,\n  /^xterm/,\n  /^vt100/,\n  /^vt220/\n];\nfunction getColorDepth() {\n  if (getEnvVar(\"FORCE_COLOR\") !== void 0) {\n    switch (getEnvVar(\"FORCE_COLOR\")) {\n      case \"\":\n      case \"1\":\n      case \"true\":\n        return COLORS_16;\n      case \"2\":\n        return COLORS_256;\n      case \"3\":\n        return COLORS_16m;\n      default:\n        return COLORS_2;\n    }\n  }\n  if (getEnvVar(\"NODE_DISABLE_COLORS\") !== void 0 && getEnvVar(\"NODE_DISABLE_COLORS\") !== \"\" || // See https://no-color.org/\n  getEnvVar(\"NO_COLOR\") !== void 0 && getEnvVar(\"NO_COLOR\") !== \"\" || // The \"dumb\" special terminal, as defined by terminfo, doesn't support\n  // ANSI color control codes.\n  // See https://invisible-island.net/ncurses/terminfo.ti.html#toc-_Specials\n  getEnvVar(\"TERM\") === \"dumb\") {\n    return COLORS_2;\n  }\n  if (getEnvVar(\"TMUX\")) {\n    return COLORS_16m;\n  }\n  if (\"TF_BUILD\" in env && \"AGENT_NAME\" in env) {\n    return COLORS_16;\n  }\n  if (\"CI\" in env) {\n    for (const { 0: envName, 1: colors } of CI_ENVS_MAP) {\n      if (envName in env) {\n        return colors;\n      }\n    }\n    if (getEnvVar(\"CI_NAME\") === \"codeship\") {\n      return COLORS_256;\n    }\n    return COLORS_2;\n  }\n  if (\"TEAMCITY_VERSION\" in env) {\n    return /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.exec(\n      getEnvVar(\"TEAMCITY_VERSION\")\n    ) !== null ? COLORS_16 : COLORS_2;\n  }\n  switch (getEnvVar(\"TERM_PROGRAM\")) {\n    case \"iTerm.app\":\n      if (!getEnvVar(\"TERM_PROGRAM_VERSION\") || /^[0-2]\\./.exec(getEnvVar(\"TERM_PROGRAM_VERSION\")) !== null) {\n        return COLORS_256;\n      }\n      return COLORS_16m;\n    case \"HyperTerm\":\n    case \"MacTerm\":\n      return COLORS_16m;\n    case \"Apple_Terminal\":\n      return COLORS_256;\n  }\n  if (getEnvVar(\"COLORTERM\") === \"truecolor\" || getEnvVar(\"COLORTERM\") === \"24bit\") {\n    return COLORS_16m;\n  }\n  if (getEnvVar(\"TERM\")) {\n    if (/truecolor/.exec(getEnvVar(\"TERM\")) !== null) {\n      return COLORS_16m;\n    }\n    if (/^xterm-256/.exec(getEnvVar(\"TERM\")) !== null) {\n      return COLORS_256;\n    }\n    const termEnv = getEnvVar(\"TERM\").toLowerCase();\n    if (TERM_ENVS[termEnv]) {\n      return TERM_ENVS[termEnv];\n    }\n    if (TERM_ENVS_REG_EXP.some((term) => term.exec(termEnv) !== null)) {\n      return COLORS_16;\n    }\n  }\n  if (getEnvVar(\"COLORTERM\")) {\n    return COLORS_16;\n  }\n  return COLORS_2;\n}\n\nconst TTY_COLORS = {\n  reset: \"\\x1B[0m\",\n  bright: \"\\x1B[1m\",\n  dim: \"\\x1B[2m\",\n  undim: \"\\x1B[22m\",\n  underscore: \"\\x1B[4m\",\n  blink: \"\\x1B[5m\",\n  reverse: \"\\x1B[7m\",\n  hidden: \"\\x1B[8m\",\n  fg: {\n    black: \"\\x1B[30m\",\n    red: \"\\x1B[31m\",\n    green: \"\\x1B[32m\",\n    yellow: \"\\x1B[33m\",\n    blue: \"\\x1B[34m\",\n    magenta: \"\\x1B[35m\",\n    cyan: \"\\x1B[36m\",\n    white: \"\\x1B[37m\"\n  },\n  bg: {\n    black: \"\\x1B[40m\",\n    red: \"\\x1B[41m\",\n    green: \"\\x1B[42m\",\n    yellow: \"\\x1B[43m\",\n    blue: \"\\x1B[44m\",\n    magenta: \"\\x1B[45m\",\n    cyan: \"\\x1B[46m\",\n    white: \"\\x1B[47m\"\n  }\n};\nconst levels = [\"info\", \"success\", \"warn\", \"error\", \"debug\"];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n  return levels.indexOf(logLevel) <= levels.indexOf(currentLogLevel);\n}\nconst levelColors = {\n  info: TTY_COLORS.fg.blue,\n  success: TTY_COLORS.fg.green,\n  warn: TTY_COLORS.fg.yellow,\n  error: TTY_COLORS.fg.red,\n  debug: TTY_COLORS.fg.magenta\n};\nconst formatMessage = (level, message, colorsEnabled) => {\n  const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n  if (colorsEnabled) {\n    return `${TTY_COLORS.dim}${timestamp}${TTY_COLORS.reset} ${levelColors[level]}${level.toUpperCase()}${TTY_COLORS.reset} ${TTY_COLORS.bright}[Better Auth]:${TTY_COLORS.reset} ${message}`;\n  }\n  return `${timestamp} ${level.toUpperCase()} [Better Auth]: ${message}`;\n};\nconst createLogger = (options) => {\n  const enabled = options?.disabled !== true;\n  const logLevel = options?.level ?? \"error\";\n  const isDisableColorsSpecified = options?.disableColors !== void 0;\n  const colorsEnabled = isDisableColorsSpecified ? !options.disableColors : getColorDepth() !== 1;\n  const LogFunc = (level, message, args = []) => {\n    if (!enabled || !shouldPublishLog(logLevel, level)) {\n      return;\n    }\n    const formattedMessage = formatMessage(level, message, colorsEnabled);\n    if (!options || typeof options.log !== \"function\") {\n      if (level === \"error\") {\n        console.error(formattedMessage, ...args);\n      } else if (level === \"warn\") {\n        console.warn(formattedMessage, ...args);\n      } else {\n        console.log(formattedMessage, ...args);\n      }\n      return;\n    }\n    options.log(level === \"success\" ? \"info\" : level, message, ...args);\n  };\n  const logger2 = Object.fromEntries(\n    levels.map((level) => [\n      level,\n      (...[message, ...args]) => LogFunc(level, message, args)\n    ])\n  );\n  return {\n    ...logger2,\n    get level() {\n      return logLevel;\n    }\n  };\n};\nconst logger = createLogger();\n\nexport { ENV, TTY_COLORS, createLogger, env, getBooleanEnvVar, getColorDepth, getEnvVar, isDevelopment, isProduction, isTest, levels, logger, nodeENV, shouldPublishLog };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/oauth2/index.mjs"],"sourcesContent":["import { base64Url, base64 } from '@better-auth/utils/base64';\nimport { betterFetch } from '@better-fetch/fetch';\nimport { jwtVerify } from 'jose';\n\nfunction getOAuth2Tokens(data) {\n  const getDate = (seconds) => {\n    const now = /* @__PURE__ */ new Date();\n    return new Date(now.getTime() + seconds * 1e3);\n  };\n  return {\n    tokenType: data.token_type,\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    accessTokenExpiresAt: data.expires_in ? getDate(data.expires_in) : void 0,\n    refreshTokenExpiresAt: data.refresh_token_expires_in ? getDate(data.refresh_token_expires_in) : void 0,\n    scopes: data?.scope ? typeof data.scope === \"string\" ? data.scope.split(\" \") : data.scope : [],\n    idToken: data.id_token\n  };\n}\nasync function generateCodeChallenge(codeVerifier) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(codeVerifier);\n  const hash = await crypto.subtle.digest(\"SHA-256\", data);\n  return base64Url.encode(new Uint8Array(hash), {\n    padding: false\n  });\n}\n\nasync function createAuthorizationURL({\n  id,\n  options,\n  authorizationEndpoint,\n  state,\n  codeVerifier,\n  scopes,\n  claims,\n  redirectURI,\n  duration,\n  prompt,\n  accessType,\n  responseType,\n  display,\n  loginHint,\n  hd,\n  responseMode,\n  additionalParams,\n  scopeJoiner\n}) {\n  const url = new URL(authorizationEndpoint);\n  url.searchParams.set(\"response_type\", responseType || \"code\");\n  const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n  url.searchParams.set(\"client_id\", primaryClientId);\n  url.searchParams.set(\"state\", state);\n  url.searchParams.set(\"scope\", scopes.join(scopeJoiner || \" \"));\n  url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  duration && url.searchParams.set(\"duration\", duration);\n  display && url.searchParams.set(\"display\", display);\n  loginHint && url.searchParams.set(\"login_hint\", loginHint);\n  prompt && url.searchParams.set(\"prompt\", prompt);\n  hd && url.searchParams.set(\"hd\", hd);\n  accessType && url.searchParams.set(\"access_type\", accessType);\n  responseMode && url.searchParams.set(\"response_mode\", responseMode);\n  if (codeVerifier) {\n    const codeChallenge = await generateCodeChallenge(codeVerifier);\n    url.searchParams.set(\"code_challenge_method\", \"S256\");\n    url.searchParams.set(\"code_challenge\", codeChallenge);\n  }\n  if (claims) {\n    const claimsObj = claims.reduce(\n      (acc, claim) => {\n        acc[claim] = null;\n        return acc;\n      },\n      {}\n    );\n    url.searchParams.set(\n      \"claims\",\n      JSON.stringify({\n        id_token: { email: null, email_verified: null, ...claimsObj }\n      })\n    );\n  }\n  if (additionalParams) {\n    Object.entries(additionalParams).forEach(([key, value]) => {\n      url.searchParams.set(key, value);\n    });\n  }\n  return url;\n}\n\nfunction createAuthorizationCodeRequest({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const body = new URLSearchParams();\n  const requestHeaders = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\",\n    \"user-agent\": \"better-auth\",\n    ...headers\n  };\n  body.set(\"grant_type\", \"authorization_code\");\n  body.set(\"code\", code);\n  codeVerifier && body.set(\"code_verifier\", codeVerifier);\n  options.clientKey && body.set(\"client_key\", options.clientKey);\n  deviceId && body.set(\"device_id\", deviceId);\n  body.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (authentication === \"basic\") {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    const encodedCredentials = base64.encode(\n      `${primaryClientId}:${options.clientSecret ?? \"\"}`\n    );\n    requestHeaders[\"authorization\"] = `Basic ${encodedCredentials}`;\n  } else {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    body.set(\"client_id\", primaryClientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  for (const [key, value] of Object.entries(additionalParams)) {\n    if (!body.has(key)) body.append(key, value);\n  }\n  return {\n    body,\n    headers: requestHeaders\n  };\n}\nasync function validateAuthorizationCode({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  tokenEndpoint,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const { body, headers: requestHeaders } = createAuthorizationCodeRequest({\n    code,\n    codeVerifier,\n    redirectURI,\n    options,\n    authentication,\n    deviceId,\n    headers,\n    additionalParams,\n    resource\n  });\n  const { data, error } = await betterFetch(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers: requestHeaders\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = getOAuth2Tokens(data);\n  return tokens;\n}\nasync function validateToken(token, jwksEndpoint) {\n  const { data, error } = await betterFetch(jwksEndpoint, {\n    method: \"GET\",\n    headers: {\n      accept: \"application/json\",\n      \"user-agent\": \"better-auth\"\n    }\n  });\n  if (error) {\n    throw error;\n  }\n  const keys = data[\"keys\"];\n  const header = JSON.parse(atob(token.split(\".\")[0]));\n  const key = keys.find((key2) => key2.kid === header.kid);\n  if (!key) {\n    throw new Error(\"Key not found\");\n  }\n  const verified = await jwtVerify(token, key);\n  return verified;\n}\n\nfunction createRefreshAccessTokenRequest({\n  refreshToken,\n  options,\n  authentication,\n  extraParams,\n  resource\n}) {\n  const body = new URLSearchParams();\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\"\n  };\n  body.set(\"grant_type\", \"refresh_token\");\n  body.set(\"refresh_token\", refreshToken);\n  if (authentication === \"basic\") {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    if (primaryClientId) {\n      headers[\"authorization\"] = \"Basic \" + base64.encode(`${primaryClientId}:${options.clientSecret ?? \"\"}`);\n    } else {\n      headers[\"authorization\"] = \"Basic \" + base64.encode(`:${options.clientSecret ?? \"\"}`);\n    }\n  } else {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    body.set(\"client_id\", primaryClientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (extraParams) {\n    for (const [key, value] of Object.entries(extraParams)) {\n      body.set(key, value);\n    }\n  }\n  return {\n    body,\n    headers\n  };\n}\nasync function refreshAccessToken({\n  refreshToken,\n  options,\n  tokenEndpoint,\n  authentication,\n  extraParams\n}) {\n  const { body, headers } = createRefreshAccessTokenRequest({\n    refreshToken,\n    options,\n    authentication,\n    extraParams\n  });\n  const { data, error } = await betterFetch(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = {\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    tokenType: data.token_type,\n    scopes: data.scope?.split(\" \"),\n    idToken: data.id_token\n  };\n  if (data.expires_in) {\n    const now = /* @__PURE__ */ new Date();\n    tokens.accessTokenExpiresAt = new Date(\n      now.getTime() + data.expires_in * 1e3\n    );\n  }\n  return tokens;\n}\n\nfunction createClientCredentialsTokenRequest({\n  options,\n  scope,\n  authentication,\n  resource\n}) {\n  const body = new URLSearchParams();\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\"\n  };\n  body.set(\"grant_type\", \"client_credentials\");\n  scope && body.set(\"scope\", scope);\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (authentication === \"basic\") {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    const encodedCredentials = base64Url.encode(\n      `${primaryClientId}:${options.clientSecret}`\n    );\n    headers[\"authorization\"] = `Basic ${encodedCredentials}`;\n  } else {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    body.set(\"client_id\", primaryClientId);\n    body.set(\"client_secret\", options.clientSecret);\n  }\n  return {\n    body,\n    headers\n  };\n}\nasync function clientCredentialsToken({\n  options,\n  tokenEndpoint,\n  scope,\n  authentication,\n  resource\n}) {\n  const { body, headers } = createClientCredentialsTokenRequest({\n    options,\n    scope,\n    authentication,\n    resource\n  });\n  const { data, error } = await betterFetch(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = {\n    accessToken: data.access_token,\n    tokenType: data.token_type,\n    scopes: data.scope?.split(\" \")\n  };\n  if (data.expires_in) {\n    const now = /* @__PURE__ */ new Date();\n    tokens.accessTokenExpiresAt = new Date(\n      now.getTime() + data.expires_in * 1e3\n    );\n  }\n  return tokens;\n}\n\nexport { clientCredentialsToken, createAuthorizationCodeRequest, createAuthorizationURL, createClientCredentialsTokenRequest, createRefreshAccessTokenRequest, generateCodeChallenge, getOAuth2Tokens, refreshAccessToken, validateAuthorizationCode, validateToken };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 641, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/utils/index.mjs"],"sourcesContent":["function defineErrorCodes(codes) {\n  return codes;\n}\n\nexport { defineErrorCodes };\n"],"names":[],"mappings":";;;;AAAA,SAAS,iBAAiB,KAAK;IAC7B,OAAO;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 653, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/error/index.mjs"],"sourcesContent":["import { defineErrorCodes } from '@better-auth/core/utils';\n\nconst BASE_ERROR_CODES = defineErrorCodes({\n  USER_NOT_FOUND: \"User not found\",\n  FAILED_TO_CREATE_USER: \"Failed to create user\",\n  FAILED_TO_CREATE_SESSION: \"Failed to create session\",\n  FAILED_TO_UPDATE_USER: \"Failed to update user\",\n  FAILED_TO_GET_SESSION: \"Failed to get session\",\n  INVALID_PASSWORD: \"Invalid password\",\n  INVALID_EMAIL: \"Invalid email\",\n  INVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n  SOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n  PROVIDER_NOT_FOUND: \"Provider not found\",\n  INVALID_TOKEN: \"Invalid token\",\n  ID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n  FAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n  USER_EMAIL_NOT_FOUND: \"User email not found\",\n  EMAIL_NOT_VERIFIED: \"Email not verified\",\n  PASSWORD_TOO_SHORT: \"Password too short\",\n  PASSWORD_TOO_LONG: \"Password too long\",\n  USER_ALREADY_EXISTS: \"User already exists.\",\n  USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL: \"User already exists. Use another email.\",\n  EMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n  CREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n  SESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n  FAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n  ACCOUNT_NOT_FOUND: \"Account not found\",\n  USER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\"\n});\n\nclass BetterAuthError extends Error {\n  constructor(message, cause) {\n    super(message);\n    this.name = \"BetterAuthError\";\n    this.message = message;\n    this.cause = cause;\n    this.stack = \"\";\n  }\n}\n\nexport { BASE_ERROR_CODES, BetterAuthError };\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,mBAAmB,IAAA,oOAAgB,EAAC;IACxC,gBAAgB;IAChB,uBAAuB;IACvB,0BAA0B;IAC1B,uBAAuB;IACvB,uBAAuB;IACvB,kBAAkB;IAClB,eAAe;IACf,2BAA2B;IAC3B,+BAA+B;IAC/B,oBAAoB;IACpB,eAAe;IACf,wBAAwB;IACxB,yBAAyB;IACzB,sBAAsB;IACtB,oBAAoB;IACpB,oBAAoB;IACpB,mBAAmB;IACnB,qBAAqB;IACrB,uCAAuC;IACvC,0BAA0B;IAC1B,8BAA8B;IAC9B,iBAAiB;IACjB,+BAA+B;IAC/B,mBAAmB;IACnB,2BAA2B;AAC7B;AAEA,MAAM,wBAAwB;IAC5B,YAAY,OAAO,EAAE,KAAK,CAAE;QAC1B,KAAK,CAAC;QACN,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,KAAK,GAAG;IACf;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 702, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/async_hooks/index.mjs"],"sourcesContent":["let moduleName = \"node:async_hooks\";\nconst AsyncLocalStoragePromise = import(\n  /* @vite-ignore */\n  /* webpackIgnore: true */\n  moduleName\n).then((mod) => mod.AsyncLocalStorage).catch((err) => {\n  if (\"AsyncLocalStorage\" in globalThis) {\n    return globalThis.AsyncLocalStorage;\n  }\n  console.warn(\n    \"[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected.\"\n  );\n  console.warn(\n    \"[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler\"\n  );\n  console.warn(\n    \"[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag\"\n  );\n  throw err;\n});\nasync function getAsyncLocalStorage() {\n  return AsyncLocalStoragePromise;\n}\n\nexport { getAsyncLocalStorage };\n"],"names":[],"mappings":";;;;AAAA,IAAI,aAAa;AACjB,MAAM,2BAA2B,MAAM,CACrC,gBAAgB,GAChB,uBAAuB,GACvB,YACA,IAAI,CAAC,CAAC,MAAQ,IAAI,iBAAiB,EAAE,KAAK,CAAC,CAAC;IAC5C,IAAI,uBAAuB,YAAY;QACrC,OAAO,WAAW,iBAAiB;IACrC;IACA,QAAQ,IAAI,CACV;IAEF,QAAQ,IAAI,CACV;IAEF,QAAQ,IAAI,CACV;IAEF,MAAM;AACR;AACA,eAAe;IACb,OAAO;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 724, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/middleware/index.mjs"],"sourcesContent":["import { createMiddleware, createEndpoint } from 'better-call';\n\nconst optionsMiddleware = createMiddleware(async () => {\n  return {};\n});\nconst createAuthMiddleware = createMiddleware.create({\n  use: [\n    optionsMiddleware,\n    /**\n     * Only use for post hooks\n     */\n    createMiddleware(async () => {\n      return {};\n    })\n  ]\n});\nconst createAuthEndpoint = createEndpoint.create({\n  use: [optionsMiddleware]\n});\n\nexport { createAuthEndpoint, createAuthMiddleware, optionsMiddleware };\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,oBAAoB,IAAA,gNAAgB,EAAC;IACzC,OAAO,CAAC;AACV;AACA,MAAM,uBAAuB,gNAAgB,CAAC,MAAM,CAAC;IACnD,KAAK;QACH;QACA;;KAEC,GACD,IAAA,gNAAgB,EAAC;YACf,OAAO,CAAC;QACV;KACD;AACH;AACA,MAAM,qBAAqB,8MAAc,CAAC,MAAM,CAAC;IAC/C,KAAK;QAAC;KAAkB;AAC1B","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 757, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/social-providers/index.mjs"],"sourcesContent":["import * as z from 'zod';\nimport { betterFetch } from '@better-fetch/fetch';\nimport { APIError } from 'better-call';\nimport { decodeJwt, decodeProtectedHeader, jwtVerify, importJWK, createRemoteJWKSet } from 'jose';\nimport { refreshAccessToken, validateAuthorizationCode, createAuthorizationURL, getOAuth2Tokens, generateCodeChallenge } from '@better-auth/core/oauth2';\nimport { BetterAuthError } from '../error/index.mjs';\nimport { logger } from '@better-auth/core/env';\nimport { base64 } from '@better-auth/utils/base64';\nimport '@better-auth/core/utils';\n\nconst apple = (options) => {\n  const tokenEndpoint = \"https://appleid.apple.com/auth/token\";\n  return {\n    id: \"apple\",\n    name: \"Apple\",\n    async createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scope = options.disableDefaultScope ? [] : [\"email\", \"name\"];\n      options.scope && _scope.push(...options.scope);\n      scopes && _scope.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"apple\",\n        options,\n        authorizationEndpoint: \"https://appleid.apple.com/auth/authorize\",\n        scopes: _scope,\n        state,\n        redirectURI,\n        responseMode: \"form_post\",\n        responseType: \"code id_token\"\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const decodedHeader = decodeProtectedHeader(token);\n      const { kid, alg: jwtAlg } = decodedHeader;\n      if (!kid || !jwtAlg) return false;\n      const publicKey = await getApplePublicKey(kid);\n      const { payload: jwtClaims } = await jwtVerify(token, publicKey, {\n        algorithms: [jwtAlg],\n        issuer: \"https://appleid.apple.com\",\n        audience: options.audience && options.audience.length ? options.audience : options.appBundleIdentifier ? options.appBundleIdentifier : options.clientId,\n        maxTokenAge: \"1h\"\n      });\n      [\"email_verified\", \"is_private_email\"].forEach((field) => {\n        if (jwtClaims[field] !== void 0) {\n          jwtClaims[field] = Boolean(jwtClaims[field]);\n        }\n      });\n      if (nonce && jwtClaims.nonce !== nonce) {\n        return false;\n      }\n      return !!jwtClaims;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://appleid.apple.com/auth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const profile = decodeJwt(token.idToken);\n      if (!profile) {\n        return null;\n      }\n      const name = token.user ? `${token.user.name?.firstName} ${token.user.name?.lastName}` : profile.name || profile.email;\n      const emailVerified = typeof profile.email_verified === \"boolean\" ? profile.email_verified : profile.email_verified === \"true\";\n      const enrichedProfile = {\n        ...profile,\n        name\n      };\n      const userMap = await options.mapProfileToUser?.(enrichedProfile);\n      return {\n        user: {\n          id: profile.sub,\n          name: enrichedProfile.name,\n          emailVerified,\n          email: profile.email,\n          ...userMap\n        },\n        data: enrichedProfile\n      };\n    },\n    options\n  };\n};\nconst getApplePublicKey = async (kid) => {\n  const APPLE_BASE_URL = \"https://appleid.apple.com\";\n  const JWKS_APPLE_URI = \"/auth/keys\";\n  const { data } = await betterFetch(`${APPLE_BASE_URL}${JWKS_APPLE_URI}`);\n  if (!data?.keys) {\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"Keys not found\"\n    });\n  }\n  const jwk = data.keys.find((key) => key.kid === kid);\n  if (!jwk) {\n    throw new Error(`JWK with kid ${kid} not found`);\n  }\n  return await importJWK(jwk, jwk.alg);\n};\n\nconst atlassian = (options) => {\n  return {\n    id: \"atlassian\",\n    name: \"Atlassian\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\"Client Id and Secret are required for Atlassian\");\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Atlassian\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"read:jira-user\", \"offline_access\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"atlassian\",\n        options,\n        authorizationEndpoint: \"https://auth.atlassian.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        additionalParams: {\n          audience: \"api.atlassian.com\"\n        },\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        return null;\n      }\n      try {\n        const { data: profile } = await betterFetch(\"https://api.atlassian.com/me\", {\n          headers: { Authorization: `Bearer ${token.accessToken}` }\n        });\n        if (!profile) return null;\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.account_id,\n            name: profile.name,\n            email: profile.email,\n            image: profile.picture,\n            emailVerified: false,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst cognito = (options) => {\n  if (!options.domain || !options.region || !options.userPoolId) {\n    logger.error(\n      \"Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options.\"\n    );\n    throw new BetterAuthError(\"DOMAIN_AND_REGION_REQUIRED\");\n  }\n  const cleanDomain = options.domain.replace(/^https?:\\/\\//, \"\");\n  const authorizationEndpoint = `https://${cleanDomain}/oauth2/authorize`;\n  const tokenEndpoint = `https://${cleanDomain}/oauth2/token`;\n  const userInfoEndpoint = `https://${cleanDomain}/oauth2/userinfo`;\n  return {\n    id: \"cognito\",\n    name: \"Cognito\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId) {\n        logger.error(\n          \"ClientId is required for Amazon Cognito. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (options.requireClientSecret && !options.clientSecret) {\n        logger.error(\n          \"Client Secret is required when requireClientSecret is true. Make sure to provide it in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_SECRET_REQUIRED\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"cognito\",\n        options: {\n          ...options\n        },\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const decodedHeader = decodeProtectedHeader(token);\n        const { kid, alg: jwtAlg } = decodedHeader;\n        if (!kid || !jwtAlg) return false;\n        const publicKey = await getCognitoPublicKey(\n          kid,\n          options.region,\n          options.userPoolId\n        );\n        const expectedIssuer = `https://cognito-idp.${options.region}.amazonaws.com/${options.userPoolId}`;\n        const { payload: jwtClaims } = await jwtVerify(token, publicKey, {\n          algorithms: [jwtAlg],\n          issuer: expectedIssuer,\n          audience: options.clientId,\n          maxTokenAge: \"1h\"\n        });\n        if (nonce && jwtClaims.nonce !== nonce) {\n          return false;\n        }\n        return true;\n      } catch (error) {\n        logger.error(\"Failed to verify ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken) {\n        try {\n          const profile = decodeJwt(token.idToken);\n          if (!profile) {\n            return null;\n          }\n          const name = profile.name || profile.given_name || profile.username || profile.email;\n          const enrichedProfile = {\n            ...profile,\n            name\n          };\n          const userMap = await options.mapProfileToUser?.(enrichedProfile);\n          return {\n            user: {\n              id: profile.sub,\n              name: enrichedProfile.name,\n              email: profile.email,\n              image: profile.picture,\n              emailVerified: profile.email_verified,\n              ...userMap\n            },\n            data: enrichedProfile\n          };\n        } catch (error) {\n          logger.error(\"Failed to decode ID token:\", error);\n        }\n      }\n      if (token.accessToken) {\n        try {\n          const { data: userInfo } = await betterFetch(\n            userInfoEndpoint,\n            {\n              headers: {\n                Authorization: `Bearer ${token.accessToken}`\n              }\n            }\n          );\n          if (userInfo) {\n            const userMap = await options.mapProfileToUser?.(userInfo);\n            return {\n              user: {\n                id: userInfo.sub,\n                name: userInfo.name || userInfo.given_name || userInfo.username,\n                email: userInfo.email,\n                image: userInfo.picture,\n                emailVerified: userInfo.email_verified,\n                ...userMap\n              },\n              data: userInfo\n            };\n          }\n        } catch (error) {\n          logger.error(\"Failed to fetch user info from Cognito:\", error);\n        }\n      }\n      return null;\n    },\n    options\n  };\n};\nconst getCognitoPublicKey = async (kid, region, userPoolId) => {\n  const COGNITO_JWKS_URI = `https://cognito-idp.${region}.amazonaws.com/${userPoolId}/.well-known/jwks.json`;\n  try {\n    const { data } = await betterFetch(COGNITO_JWKS_URI);\n    if (!data?.keys) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Keys not found\"\n      });\n    }\n    const jwk = data.keys.find((key) => key.kid === kid);\n    if (!jwk) {\n      throw new Error(`JWK with kid ${kid} not found`);\n    }\n    return await importJWK(jwk, jwk.alg);\n  } catch (error) {\n    logger.error(\"Failed to fetch Cognito public key:\", error);\n    throw error;\n  }\n};\n\nconst discord = (options) => {\n  return {\n    id: \"discord\",\n    name: \"Discord\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identify\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      const hasBotScope = _scopes.includes(\"bot\");\n      const permissionsParam = hasBotScope && options.permissions !== void 0 ? `&permissions=${options.permissions}` : \"\";\n      return new URL(\n        `https://discord.com/api/oauth2/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"none\"}${permissionsParam}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://discord.com/api/users/@me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (profile.avatar === null) {\n        const defaultAvatarNumber = profile.discriminator === \"0\" ? Number(BigInt(profile.id) >> BigInt(22)) % 6 : parseInt(profile.discriminator) % 5;\n        profile.image_url = `https://cdn.discordapp.com/embed/avatars/${defaultAvatarNumber}.png`;\n      } else {\n        const format = profile.avatar.startsWith(\"a_\") ? \"gif\" : \"png\";\n        profile.image_url = `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.${format}`;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.global_name || profile.username || \"\",\n          email: profile.email,\n          emailVerified: profile.verified,\n          image: profile.image_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst facebook = (options) => {\n  return {\n    id: \"facebook\",\n    name: \"Facebook\",\n    async createAuthorizationURL({ state, scopes, redirectURI, loginHint }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"public_profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"facebook\",\n        options,\n        authorizationEndpoint: \"https://www.facebook.com/v21.0/dialog/oauth\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: options.configId ? {\n          config_id: options.configId\n        } : {}\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://graph.facebook.com/oauth/access_token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      if (token.split(\".\").length === 3) {\n        try {\n          const { payload: jwtClaims } = await jwtVerify(\n            token,\n            createRemoteJWKSet(\n              // https://developers.facebook.com/docs/facebook-login/limited-login/token/#jwks\n              new URL(\n                \"https://limited.facebook.com/.well-known/oauth/openid/jwks/\"\n              )\n            ),\n            {\n              algorithms: [\"RS256\"],\n              audience: options.clientId,\n              issuer: \"https://www.facebook.com\"\n            }\n          );\n          if (nonce && jwtClaims.nonce !== nonce) {\n            return false;\n          }\n          return !!jwtClaims;\n        } catch (error) {\n          return false;\n        }\n      }\n      return true;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://graph.facebook.com/v18.0/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken && token.idToken.split(\".\").length === 3) {\n        const profile2 = decodeJwt(token.idToken);\n        const user = {\n          id: profile2.sub,\n          name: profile2.name,\n          email: profile2.email,\n          picture: {\n            data: {\n              url: profile2.picture,\n              height: 100,\n              width: 100,\n              is_silhouette: false\n            }\n          }\n        };\n        const userMap2 = await options.mapProfileToUser?.({\n          ...user,\n          email_verified: true\n        });\n        return {\n          user: {\n            ...user,\n            emailVerified: true,\n            ...userMap2\n          },\n          data: profile2\n        };\n      }\n      const fields = [\n        \"id\",\n        \"name\",\n        \"email\",\n        \"picture\",\n        ...options?.fields || []\n      ];\n      const { data: profile, error } = await betterFetch(\n        \"https://graph.facebook.com/me?fields=\" + fields.join(\",\"),\n        {\n          auth: {\n            type: \"Bearer\",\n            token: token.accessToken\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.picture.data.url,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst figma = (options) => {\n  return {\n    id: \"figma\",\n    name: \"Figma\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret are required for Figma. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Figma\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"file_read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"figma\",\n        options,\n        authorizationEndpoint: \"https://www.figma.com/oauth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: profile } = await betterFetch(\n          \"https://api.figma.com/v1/me\",\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!profile) {\n          logger.error(\"Failed to fetch user from Figma\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.id,\n            name: profile.handle,\n            email: profile.email,\n            image: profile.img_url,\n            emailVerified: !!profile.email,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst github = (options) => {\n  const tokenEndpoint = \"https://github.com/login/oauth/access_token\";\n  return {\n    id: \"github\",\n    name: \"GitHub\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read:user\", \"user:email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"github\",\n        options,\n        authorizationEndpoint: \"https://github.com/login/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://github.com/login/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.github.com/user\",\n        {\n          headers: {\n            \"User-Agent\": \"better-auth\",\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const { data: emails } = await betterFetch(\"https://api.github.com/user/emails\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"User-Agent\": \"better-auth\"\n        }\n      });\n      if (!profile.email && emails) {\n        profile.email = (emails.find((e) => e.primary) ?? emails[0])?.email;\n      }\n      const emailVerified = emails?.find((e) => e.email === profile.email)?.verified ?? false;\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name || profile.login,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst google = (options) => {\n  return {\n    id: \"google\",\n    name: \"Google\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint,\n      display\n    }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret is required for Google. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Google\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"profile\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"google\",\n        options,\n        authorizationEndpoint: \"https://accounts.google.com/o/oauth2/auth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt,\n        accessType: options.accessType,\n        display: display || options.display,\n        loginHint,\n        hd: options.hd,\n        additionalParams: {\n          include_granted_scopes: \"true\"\n        }\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://oauth2.googleapis.com/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.googleapis.com/oauth2/v4/token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const googlePublicKeyUrl = `https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${token}`;\n      const { data: tokenInfo } = await betterFetch(googlePublicKeyUrl);\n      if (!tokenInfo) {\n        return false;\n      }\n      const isValid = tokenInfo.aud === options.clientId && (tokenInfo.iss === \"https://accounts.google.com\" || tokenInfo.iss === \"accounts.google.com\");\n      return isValid;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = decodeJwt(token.idToken);\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: user.email_verified,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    options\n  };\n};\n\nconst kick = (options) => {\n  return {\n    id: \"kick\",\n    name: \"Kick\",\n    createAuthorizationURL({ state, scopes, redirectURI, codeVerifier }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"kick\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.kick.com/oauth/authorize\",\n        scopes: _scopes,\n        codeVerifier,\n        state\n      });\n    },\n    async validateAuthorizationCode({ code, redirectURI, codeVerifier }) {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.kick.com/oauth/token\",\n        codeVerifier\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data, error } = await betterFetch(\"https://api.kick.com/public/v1/users\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      if (error) {\n        return null;\n      }\n      const profile = data.data[0];\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user_id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.profile_picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst huggingface = (options) => {\n  return {\n    id: \"huggingface\",\n    name: \"Hugging Face\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"huggingface\",\n        options,\n        authorizationEndpoint: \"https://huggingface.co/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://huggingface.co/oauth/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name || profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified ?? false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst microsoft = (options) => {\n  const tenant = options.tenantId || \"common\";\n  const authority = options.authority || \"https://login.microsoftonline.com\";\n  const authorizationEndpoint = `${authority}/${tenant}/oauth2/v2.0/authorize`;\n  const tokenEndpoint = `${authority}/${tenant}/oauth2/v2.0/token`;\n  return {\n    id: \"microsoft\",\n    name: \"Microsoft EntraID\",\n    createAuthorizationURL(data) {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      data.scopes && scopes.push(...data.scopes);\n      return createAuthorizationURL({\n        id: \"microsoft\",\n        options,\n        authorizationEndpoint,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        scopes,\n        redirectURI: data.redirectURI,\n        prompt: options.prompt,\n        loginHint: data.loginHint\n      });\n    },\n    validateAuthorizationCode({ code, codeVerifier, redirectURI }) {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = decodeJwt(token.idToken);\n      const profilePhotoSize = options.profilePhotoSize || 48;\n      await betterFetch(\n        `https://graph.microsoft.com/v1.0/me/photos/${profilePhotoSize}x${profilePhotoSize}/$value`,\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          async onResponse(context) {\n            if (options.disableProfilePhoto || !context.response.ok) {\n              return;\n            }\n            try {\n              const response = context.response.clone();\n              const pictureBuffer = await response.arrayBuffer();\n              const pictureBase64 = base64.encode(pictureBuffer);\n              user.picture = `data:image/jpeg;base64, ${pictureBase64}`;\n            } catch (e) {\n              logger.error(\n                e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n                e\n              );\n            }\n          }\n        }\n      );\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        extraParams: {\n          scope: scopes.join(\" \")\n          // Include the scopes in request to microsoft\n        },\n        tokenEndpoint\n      });\n    },\n    options\n  };\n};\n\nconst slack = (options) => {\n  return {\n    id: \"slack\",\n    name: \"Slack\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      const url = new URL(\"https://slack.com/openid/connect/authorize\");\n      url.searchParams.set(\"scope\", _scopes.join(\" \"));\n      url.searchParams.set(\"response_type\", \"code\");\n      url.searchParams.set(\"client_id\", options.clientId);\n      url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n      url.searchParams.set(\"state\", state);\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://slack.com/api/openid.connect.userInfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile[\"https://slack.com/user_id\"],\n          name: profile.name || \"\",\n          email: profile.email,\n          emailVerified: profile.email_verified,\n          image: profile.picture || profile[\"https://slack.com/user_image_512\"],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst notion = (options) => {\n  const tokenEndpoint = \"https://api.notion.com/v1/oauth/token\";\n  return {\n    id: \"notion\",\n    name: \"Notion\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"notion\",\n        options,\n        authorizationEndpoint: \"https://api.notion.com/v1/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: {\n          owner: \"user\"\n        }\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint,\n        authentication: \"basic\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\"https://api.notion.com/v1/users/me\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"Notion-Version\": \"2022-06-28\"\n        }\n      });\n      if (error || !profile) {\n        return null;\n      }\n      const userProfile = profile.bot?.owner?.user;\n      if (!userProfile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(userProfile);\n      return {\n        user: {\n          id: userProfile.id,\n          name: userProfile.name || \"Notion User\",\n          email: userProfile.person?.email || null,\n          image: userProfile.avatar_url,\n          emailVerified: !!userProfile.person?.email,\n          ...userMap\n        },\n        data: userProfile\n      };\n    },\n    options\n  };\n};\n\nconst spotify = (options) => {\n  return {\n    id: \"spotify\",\n    name: \"Spotify\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user-read-email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"spotify\",\n        options,\n        authorizationEndpoint: \"https://accounts.spotify.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.spotify.com/v1/me\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          email: profile.email,\n          image: profile.images[0]?.url,\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitch = (options) => {\n  return {\n    id: \"twitch\",\n    name: \"Twitch\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read:email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"twitch\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.twitch.tv/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        claims: options.claims || [\n          \"email\",\n          \"email_verified\",\n          \"preferred_username\",\n          \"picture\"\n        ]\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const idToken = token.idToken;\n      if (!idToken) {\n        logger.error(\"No idToken found in token\");\n        return null;\n      }\n      const profile = decodeJwt(idToken);\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitter = (options) => {\n  return {\n    id: \"twitter\",\n    name: \"Twitter\",\n    createAuthorizationURL(data) {\n      const _scopes = options.disableDefaultScope ? [] : [\"users.read\", \"tweet.read\", \"offline.access\", \"users.email\"];\n      options.scope && _scopes.push(...options.scope);\n      data.scopes && _scopes.push(...data.scopes);\n      return createAuthorizationURL({\n        id: \"twitter\",\n        options,\n        authorizationEndpoint: \"https://x.com/i/oauth2/authorize\",\n        scopes: _scopes,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        redirectURI: data.redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        authentication: \"basic\",\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error: profileError } = await betterFetch(\n        \"https://api.x.com/2/users/me?user.fields=profile_image_url\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (profileError) {\n        return null;\n      }\n      const { data: emailData, error: emailError } = await betterFetch(\"https://api.x.com/2/users/me?user.fields=confirmed_email\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      let emailVerified = false;\n      if (!emailError && emailData?.data?.confirmed_email) {\n        profile.data.email = emailData.data.confirmed_email;\n        emailVerified = true;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.data.id,\n          name: profile.data.name,\n          email: profile.data.email || profile.data.username || null,\n          image: profile.data.profile_image_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst dropbox = (options) => {\n  const tokenEndpoint = \"https://api.dropboxapi.com/oauth2/token\";\n  return {\n    id: \"dropbox\",\n    name: \"Dropbox\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_info.read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const additionalParams = {};\n      if (options.accessType) {\n        additionalParams.token_access_type = options.accessType;\n      }\n      return await createAuthorizationURL({\n        id: \"dropbox\",\n        options,\n        authorizationEndpoint: \"https://www.dropbox.com/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        additionalParams\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://api.dropbox.com/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.dropboxapi.com/2/users/get_current_account\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.account_id,\n          name: profile.name?.display_name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.profile_photo_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst linear = (options) => {\n  const tokenEndpoint = \"https://api.linear.app/oauth/token\";\n  return {\n    id: \"linear\",\n    name: \"Linear\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"linear\",\n        options,\n        authorizationEndpoint: \"https://linear.app/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.linear.app/graphql\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          body: JSON.stringify({\n            query: `\n\t\t\t\t\t\t\tquery {\n\t\t\t\t\t\t\t\tviewer {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\tavatarUrl\n\t\t\t\t\t\t\t\t\tactive\n\t\t\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`\n          })\n        }\n      );\n      if (error || !profile?.data?.viewer) {\n        return null;\n      }\n      const userData = profile.data.viewer;\n      const userMap = await options.mapProfileToUser?.(userData);\n      return {\n        user: {\n          id: profile.data.viewer.id,\n          name: profile.data.viewer.name,\n          email: profile.data.viewer.email,\n          image: profile.data.viewer.avatarUrl,\n          emailVerified: true,\n          ...userMap\n        },\n        data: userData\n      };\n    },\n    options\n  };\n};\n\nconst linkedin = (options) => {\n  const authorizationEndpoint = \"https://www.linkedin.com/oauth/v2/authorization\";\n  const tokenEndpoint = \"https://www.linkedin.com/oauth/v2/accessToken\";\n  return {\n    id: \"linkedin\",\n    name: \"Linkedin\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      redirectURI,\n      loginHint\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"linkedin\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        loginHint,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.linkedin.com/v2/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.picture,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst cleanDoubleSlashes = (input = \"\") => {\n  return input.split(\"://\").map((str) => str.replace(/\\/{2,}/g, \"/\")).join(\"://\");\n};\nconst issuerToEndpoints = (issuer) => {\n  let baseUrl = issuer || \"https://gitlab.com\";\n  return {\n    authorizationEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/authorize`),\n    tokenEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/token`),\n    userinfoEndpoint: cleanDoubleSlashes(`${baseUrl}/api/v4/user`)\n  };\n};\nconst gitlab = (options) => {\n  const { authorizationEndpoint, tokenEndpoint, userinfoEndpoint } = issuerToEndpoints(options.issuer);\n  const issuerId = \"gitlab\";\n  const issuerName = \"Gitlab\";\n  return {\n    id: issuerId,\n    name: issuerName,\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      loginHint,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"read_user\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: issuerId,\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        codeVerifier,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        userinfoEndpoint,\n        { headers: { authorization: `Bearer ${token.accessToken}` } }\n      );\n      if (error || profile.state !== \"active\" || profile.locked) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst tiktok = (options) => {\n  return {\n    id: \"tiktok\",\n    name: \"TikTok\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user.info.profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://www.tiktok.com/v2/auth/authorize?scope=${_scopes.join(\n          \",\"\n        )}&response_type=code&client_key=${options.clientKey}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options: {\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\",\n        authentication: \"post\",\n        extraParams: {\n          client_key: options.clientKey\n        }\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const fields = [\n        \"open_id\",\n        \"avatar_large_url\",\n        \"display_name\",\n        \"username\"\n      ];\n      const { data: profile, error } = await betterFetch(\n        `https://open.tiktokapis.com/v2/user/info/?fields=${fields.join(\",\")}`,\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      return {\n        user: {\n          email: profile.data.user.email || profile.data.user.username,\n          id: profile.data.user.open_id,\n          name: profile.data.user.display_name || profile.data.user.username,\n          image: profile.data.user.avatar_large_url,\n          /** @note Tiktok does not provide emailVerified or even email*/\n          emailVerified: profile.data.user.email ? true : false\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst reddit = (options) => {\n  return {\n    id: \"reddit\",\n    name: \"Reddit\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identity\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"reddit\",\n        options,\n        authorizationEndpoint: \"https://www.reddit.com/api/v1/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        duration: options.duration\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        code,\n        redirect_uri: options.redirectURI || redirectURI\n      });\n      const headers = {\n        \"content-type\": \"application/x-www-form-urlencoded\",\n        accept: \"text/plain\",\n        \"user-agent\": \"better-auth\",\n        Authorization: `Basic ${base64.encode(\n          `${options.clientId}:${options.clientSecret}`\n        )}`\n      };\n      const { data, error } = await betterFetch(\n        \"https://www.reddit.com/api/v1/access_token\",\n        {\n          method: \"POST\",\n          headers,\n          body: body.toString()\n        }\n      );\n      if (error) {\n        throw error;\n      }\n      return getOAuth2Tokens(data);\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://www.reddit.com/api/v1/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://oauth.reddit.com/api/v1/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`,\n            \"User-Agent\": \"better-auth\"\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.oauth_client_id,\n          emailVerified: profile.has_verified_email,\n          image: profile.icon_img?.split(\"?\")[0],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst roblox = (options) => {\n  return {\n    id: \"roblox\",\n    name: \"Roblox\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://apis.roblox.com/oauth/v1/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"select_account consent\"}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\",\n        authentication: \"post\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://apis.roblox.com/oauth/v1/userinfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.nickname || profile.preferred_username || \"\",\n          image: profile.picture,\n          email: profile.preferred_username || null,\n          // Roblox does not provide email\n          emailVerified: true,\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    },\n    options\n  };\n};\n\nconst salesforce = (options) => {\n  const environment = options.environment ?? \"production\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/authorize` : isSandbox ? \"https://test.salesforce.com/services/oauth2/authorize\" : \"https://login.salesforce.com/services/oauth2/authorize\";\n  const tokenEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/token` : isSandbox ? \"https://test.salesforce.com/services/oauth2/token\" : \"https://login.salesforce.com/services/oauth2/token\";\n  const userInfoEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/userinfo` : isSandbox ? \"https://test.salesforce.com/services/oauth2/userinfo\" : \"https://login.salesforce.com/services/oauth2/userinfo\";\n  return {\n    id: \"salesforce\",\n    name: \"Salesforce\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Salesforce\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"email\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"salesforce\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: user } = await betterFetch(\n          userInfoEndpoint,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!user) {\n          logger.error(\"Failed to fetch user info from Salesforce\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(user);\n        return {\n          user: {\n            id: user.user_id,\n            name: user.name,\n            email: user.email,\n            image: user.photos?.picture || user.photos?.thumbnail,\n            emailVerified: user.email_verified ?? false,\n            ...userMap\n          },\n          data: user\n        };\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from Salesforce:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst vk = (options) => {\n  return {\n    id: \"vk\",\n    name: \"VK\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"phone\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const authorizationEndpoint = \"https://id.vk.com/authorize\";\n      return createAuthorizationURL({\n        id: \"vk\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier\n      });\n    },\n    validateAuthorizationCode: async ({\n      code,\n      codeVerifier,\n      redirectURI,\n      deviceId\n    }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        deviceId,\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    async getUserInfo(data) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(data);\n      }\n      if (!data.accessToken) {\n        return null;\n      }\n      const formBody = new URLSearchParams({\n        access_token: data.accessToken,\n        client_id: options.clientId\n      }).toString();\n      const { data: profile, error } = await betterFetch(\n        \"https://id.vk.com/oauth2/user_info\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: formBody\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (!profile.user.email) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user.user_id,\n          first_name: profile.user.first_name,\n          last_name: profile.user.last_name,\n          email: profile.user.email,\n          image: profile.user.avatar,\n          /** @note VK does not provide emailVerified*/\n          emailVerified: !!profile.user.email,\n          birthday: profile.user.birthday,\n          sex: profile.user.sex,\n          name: `${profile.user.first_name} ${profile.user.last_name}`,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst zoom = (userOptions) => {\n  const options = {\n    pkce: true,\n    ...userOptions\n  };\n  return {\n    id: \"zoom\",\n    name: \"Zoom\",\n    createAuthorizationURL: async ({ state, redirectURI, codeVerifier }) => {\n      const params = new URLSearchParams({\n        response_type: \"code\",\n        redirect_uri: options.redirectURI ? options.redirectURI : redirectURI,\n        client_id: options.clientId,\n        state\n      });\n      if (options.pkce) {\n        const codeChallenge = await generateCodeChallenge(codeVerifier);\n        params.set(\"code_challenge_method\", \"S256\");\n        params.set(\"code_challenge\", codeChallenge);\n      }\n      const url = new URL(\"https://zoom.us/oauth/authorize\");\n      url.search = params.toString();\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        codeVerifier,\n        options,\n        tokenEndpoint: \"https://zoom.us/oauth/token\",\n        authentication: \"post\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.zoom.us/v2/users/me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          image: profile.pic_url,\n          email: profile.email,\n          emailVerified: Boolean(profile.verified),\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    }\n  };\n};\n\nconst kakao = (options) => {\n  return {\n    id: \"kakao\",\n    name: \"Kakao\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_email\", \"profile_image\", \"profile_nickname\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"kakao\",\n        options,\n        authorizationEndpoint: \"https://kauth.kakao.com/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://kapi.kakao.com/v2/user/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const account = profile.kakao_account || {};\n      const kakaoProfile = account.profile || {};\n      const user = {\n        id: String(profile.id),\n        name: kakaoProfile.nickname || account.name || void 0,\n        email: account.email,\n        image: kakaoProfile.profile_image_url || kakaoProfile.thumbnail_image_url,\n        emailVerified: !!account.is_email_valid && !!account.is_email_verified,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst naver = (options) => {\n  return {\n    id: \"naver\",\n    name: \"Naver\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"naver\",\n        options,\n        authorizationEndpoint: \"https://nid.naver.com/oauth2.0/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://openapi.naver.com/v1/nid/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile || profile.resultcode !== \"00\") {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const res = profile.response || {};\n      const user = {\n        id: res.id,\n        name: res.name || res.nickname,\n        email: res.email,\n        image: res.profile_image,\n        emailVerified: false,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst line = (options) => {\n  const authorizationEndpoint = \"https://access.line.me/oauth2/v2.1/authorize\";\n  const tokenEndpoint = \"https://api.line.me/oauth2/v2.1/token\";\n  const userInfoEndpoint = \"https://api.line.me/oauth2/v2.1/userinfo\";\n  const verifyIdTokenEndpoint = \"https://api.line.me/oauth2/v2.1/verify\";\n  return {\n    id: \"line\",\n    name: \"LINE\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint\n    }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"line\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const body = new URLSearchParams();\n      body.set(\"id_token\", token);\n      body.set(\"client_id\", options.clientId);\n      if (nonce) body.set(\"nonce\", nonce);\n      const { data, error } = await betterFetch(\n        verifyIdTokenEndpoint,\n        {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/x-www-form-urlencoded\"\n          },\n          body\n        }\n      );\n      if (error || !data) {\n        return false;\n      }\n      if (data.aud !== options.clientId) return false;\n      if (nonce && data.nonce && data.nonce !== nonce) return false;\n      return true;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      let profile = null;\n      if (token.idToken) {\n        try {\n          profile = decodeJwt(token.idToken);\n        } catch {\n        }\n      }\n      if (!profile) {\n        const { data } = await betterFetch(userInfoEndpoint, {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        });\n        profile = data || null;\n      }\n      if (!profile) return null;\n      const userMap = await options.mapProfileToUser?.(profile);\n      const id = profile.sub || profile.userId;\n      const name = profile.name || profile.displayName;\n      const image = profile.picture || profile.pictureUrl || void 0;\n      const email = profile.email;\n      return {\n        user: {\n          id,\n          name,\n          email,\n          image,\n          // LINE does not expose email verification status in ID token/userinfo\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst paypal = (options) => {\n  const environment = options.environment || \"sandbox\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = isSandbox ? \"https://www.sandbox.paypal.com/signin/authorize\" : \"https://www.paypal.com/signin/authorize\";\n  const tokenEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/oauth2/token\" : \"https://api-m.paypal.com/v1/oauth2/token\";\n  const userInfoEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo\" : \"https://api-m.paypal.com/v1/identity/oauth2/userinfo\";\n  return {\n    id: \"paypal\",\n    name: \"PayPal\",\n    async createAuthorizationURL({ state, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret is required for PayPal. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      const _scopes = [];\n      const url = await createAuthorizationURL({\n        id: \"paypal\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const credentials = base64.encode(\n        `${options.clientId}:${options.clientSecret}`\n      );\n      try {\n        const response = await betterFetch(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"authorization_code\",\n            code,\n            redirect_uri: redirectURI\n          }).toString()\n        });\n        if (!response.data) {\n          throw new BetterAuthError(\"FAILED_TO_GET_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        const result = {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0,\n          idToken: data.id_token\n        };\n        return result;\n      } catch (error) {\n        logger.error(\"PayPal token exchange failed:\", error);\n        throw new BetterAuthError(\"FAILED_TO_GET_ACCESS_TOKEN\");\n      }\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const credentials = base64.encode(\n        `${options.clientId}:${options.clientSecret}`\n      );\n      try {\n        const response = await betterFetch(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"refresh_token\",\n            refresh_token: refreshToken\n          }).toString()\n        });\n        if (!response.data) {\n          throw new BetterAuthError(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        return {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0\n        };\n      } catch (error) {\n        logger.error(\"PayPal token refresh failed:\", error);\n        throw new BetterAuthError(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n      }\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const payload = decodeJwt(token);\n        return !!payload.sub;\n      } catch (error) {\n        logger.error(\"Failed to verify PayPal ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        logger.error(\"Access token is required to fetch PayPal user info\");\n        return null;\n      }\n      try {\n        const response = await betterFetch(\n          `${userInfoEndpoint}?schema=paypalv1.1`,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`,\n              Accept: \"application/json\"\n            }\n          }\n        );\n        if (!response.data) {\n          logger.error(\"Failed to fetch user info from PayPal\");\n          return null;\n        }\n        const userInfo = response.data;\n        const userMap = await options.mapProfileToUser?.(userInfo);\n        const result = {\n          user: {\n            id: userInfo.user_id,\n            name: userInfo.name,\n            email: userInfo.email,\n            image: userInfo.picture,\n            emailVerified: userInfo.email_verified,\n            ...userMap\n          },\n          data: userInfo\n        };\n        return result;\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from PayPal:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst socialProviders = {\n  apple,\n  atlassian,\n  cognito,\n  discord,\n  facebook,\n  figma,\n  github,\n  microsoft,\n  google,\n  huggingface,\n  slack,\n  spotify,\n  twitch,\n  twitter,\n  dropbox,\n  kick,\n  linear,\n  linkedin,\n  gitlab,\n  tiktok,\n  reddit,\n  roblox,\n  salesforce,\n  vk,\n  zoom,\n  notion,\n  kakao,\n  naver,\n  line,\n  paypal\n};\nconst socialProviderList = Object.keys(socialProviders);\nconst SocialProviderListEnum = z.enum(socialProviderList).or(z.string());\n\nexport { SocialProviderListEnum, apple, atlassian, cognito, discord, dropbox, facebook, figma, getApplePublicKey, getCognitoPublicKey, github, gitlab, google, huggingface, kakao, kick, line, linear, linkedin, microsoft, naver, notion, paypal, reddit, roblox, salesforce, slack, socialProviderList, socialProviders, spotify, tiktok, twitch, twitter, vk, zoom };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3498, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/QuocDat/OneDrive/Desktop/first-project/node_modules/%40better-auth/core/dist/db/index.mjs"],"sourcesContent":["import * as z from 'zod';\n\nconst coreSchema = z.object({\n  id: z.string(),\n  createdAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: z.date().default(() => /* @__PURE__ */ new Date())\n});\n\nconst userSchema = coreSchema.extend({\n  email: z.string().transform((val) => val.toLowerCase()),\n  emailVerified: z.boolean().default(false),\n  name: z.string(),\n  image: z.string().nullish()\n});\n\nconst accountSchema = coreSchema.extend({\n  providerId: z.string(),\n  accountId: z.string(),\n  userId: z.coerce.string(),\n  accessToken: z.string().nullish(),\n  refreshToken: z.string().nullish(),\n  idToken: z.string().nullish(),\n  /**\n   * Access token expires at\n   */\n  accessTokenExpiresAt: z.date().nullish(),\n  /**\n   * Refresh token expires at\n   */\n  refreshTokenExpiresAt: z.date().nullish(),\n  /**\n   * The scopes that the user has authorized\n   */\n  scope: z.string().nullish(),\n  /**\n   * Password is only stored in the credential provider\n   */\n  password: z.string().nullish()\n});\n\nconst sessionSchema = coreSchema.extend({\n  userId: z.coerce.string(),\n  expiresAt: z.date(),\n  token: z.string(),\n  ipAddress: z.string().nullish(),\n  userAgent: z.string().nullish()\n});\n\nconst verificationSchema = coreSchema.extend({\n  value: z.string(),\n  expiresAt: z.date(),\n  identifier: z.string()\n});\n\nconst rateLimitSchema = z.object({\n  /**\n   * The key to use for rate limiting\n   */\n  key: z.string(),\n  /**\n   * The number of requests made\n   */\n  count: z.number(),\n  /**\n   * The last request time in milliseconds\n   */\n  lastRequest: z.number()\n});\n\nexport { accountSchema, coreSchema, rateLimitSchema, sessionSchema, userSchema, verificationSchema };\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;;AAEA,MAAM,aAAa,sMAAQ,CAAC;IAC1B,IAAI,sMAAQ;IACZ,WAAW,oMAAM,GAAG,OAAO,CAAC,IAAM,aAAa,GAAG,IAAI;IACtD,WAAW,oMAAM,GAAG,OAAO,CAAC,IAAM,aAAa,GAAG,IAAI;AACxD;AAEA,MAAM,aAAa,WAAW,MAAM,CAAC;IACnC,OAAO,sMAAQ,GAAG,SAAS,CAAC,CAAC,MAAQ,IAAI,WAAW;IACpD,eAAe,uMAAS,GAAG,OAAO,CAAC;IACnC,MAAM,sMAAQ;IACd,OAAO,sMAAQ,GAAG,OAAO;AAC3B;AAEA,MAAM,gBAAgB,WAAW,MAAM,CAAC;IACtC,YAAY,sMAAQ;IACpB,WAAW,sMAAQ;IACnB,QAAQ,uMAAQ,CAAC,MAAM;IACvB,aAAa,sMAAQ,GAAG,OAAO;IAC/B,cAAc,sMAAQ,GAAG,OAAO;IAChC,SAAS,sMAAQ,GAAG,OAAO;IAC3B;;GAEC,GACD,sBAAsB,oMAAM,GAAG,OAAO;IACtC;;GAEC,GACD,uBAAuB,oMAAM,GAAG,OAAO;IACvC;;GAEC,GACD,OAAO,sMAAQ,GAAG,OAAO;IACzB;;GAEC,GACD,UAAU,sMAAQ,GAAG,OAAO;AAC9B;AAEA,MAAM,gBAAgB,WAAW,MAAM,CAAC;IACtC,QAAQ,uMAAQ,CAAC,MAAM;IACvB,WAAW,oMAAM;IACjB,OAAO,sMAAQ;IACf,WAAW,sMAAQ,GAAG,OAAO;IAC7B,WAAW,sMAAQ,GAAG,OAAO;AAC/B;AAEA,MAAM,qBAAqB,WAAW,MAAM,CAAC;IAC3C,OAAO,sMAAQ;IACf,WAAW,oMAAM;IACjB,YAAY,sMAAQ;AACtB;AAEA,MAAM,kBAAkB,sMAAQ,CAAC;IAC/B;;GAEC,GACD,KAAK,sMAAQ;IACb;;GAEC,GACD,OAAO,sMAAQ;IACf;;GAEC,GACD,aAAa,sMAAQ;AACvB","ignoreList":[0],"debugId":null}}]
}